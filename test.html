<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            padding: 2rem;
            background: #f8fafc;
            line-height: 1.6;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
        }
        .test-section h2 {
            color: #2563eb;
            margin-bottom: 1rem;
        }
        .test-result {
            padding: 0.75rem;
            margin: 0.5rem 0;
            border-radius: 0.25rem;
            font-weight: bold;
        }
        .test-pass {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        .test-fail {
            background: #fee2e2;
            color: #7f1d1d;
            border: 1px solid #ef4444;
        }
        .test-warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #f59e0b;
        }
        .test-info {
            background: #dbeafe;
            color: #1e3a8a;
            border: 1px solid #3b82f6;
        }
        button {
            background: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem;
            transition: all 0.2s;
        }
        button:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }
        .stat-card {
            text-align: center;
            padding: 1rem;
            border-radius: 0.5rem;
            color: white;
        }
        .stat-pass { background: #10b981; }
        .stat-fail { background: #ef4444; }
        .stat-warning { background: #f59e0b; }
        .stat-info { background: #3b82f6; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="text-align: center; color: #1f2937; margin-bottom: 2rem;">
            ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ø¬Ø¨Ø§Øª Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ÙˆØ§Ø¦Ù„ÙŠ
        </h1>
        
        <div style="text-align: center; margin-bottom: 2rem;">
            <button onclick="runAllTests()">ğŸš€ ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</button>
            <button onclick="clearResults()">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
        </div>

        <div id="testResults"></div>
        
        <div class="stats" id="testStats" style="display: none;">
            <div class="stat-card stat-pass">
                <h3>Ù†Ø¬Ø­</h3>
                <span id="passCount">0</span>
            </div>
            <div class="stat-card stat-fail">
                <h3>ÙØ´Ù„</h3>
                <span id="failCount">0</span>
            </div>
            <div class="stat-card stat-warning">
                <h3>ØªØ­Ø°ÙŠØ±</h3>
                <span id="warningCount">0</span>
            </div>
            <div class="stat-card stat-info">
                <h3>Ù…Ø¹Ù„ÙˆÙ…Ø©</h3>
                <span id="infoCount">0</span>
            </div>
        </div>
    </div>

    <script>
        let testResults = [];
        
        // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
        let stats = {
            pass: 0,
            fail: 0,
            warning: 0,
            info: 0
        };

        function addTestResult(name, result, type = 'info', details = '') {
            const testResult = { name, result, type, details, timestamp: new Date() };
            testResults.push(testResult);
            stats[type]++;
            
            const resultsDiv = document.getElementById('testResults');
            const testDiv = document.createElement('div');
            testDiv.className = 'test-section';
            testDiv.innerHTML = `
                <h3>${name}</h3>
                <div class="test-result test-${type}">
                    ${getStatusIcon(type)} ${result}
                </div>
                ${details ? `<p style="margin-top: 1rem; color: #6b7280;">${details}</p>` : ''}
            `;
            resultsDiv.appendChild(testDiv);
            
            updateStats();
        }

        function getStatusIcon(type) {
            const icons = {
                pass: 'âœ…',
                fail: 'âŒ',
                warning: 'âš ï¸',
                info: 'â„¹ï¸'
            };
            return icons[type] || 'â„¹ï¸';
        }

        function updateStats() {
            document.getElementById('passCount').textContent = stats.pass;
            document.getElementById('failCount').textContent = stats.fail;
            document.getElementById('warningCount').textContent = stats.warning;
            document.getElementById('infoCount').textContent = stats.info;
            document.getElementById('testStats').style.display = 'grid';
        }

        function clearResults() {
            document.getElementById('testResults').innerHTML = '';
            document.getElementById('testStats').style.display = 'none';
            testResults = [];
            stats = { pass: 0, fail: 0, warning: 0, info: 0 };
        }

        // Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        function testBrowserSupport() {
            const features = {
                localStorage: typeof localStorage !== 'undefined',
                fetch: typeof fetch !== 'undefined',
                abortController: typeof AbortController !== 'undefined',
                promises: typeof Promise !== 'undefined',
                es6: (() => { try { eval('const test = () => {};'); return true; } catch { return false; } })(),
                webgl: !!window.WebGLRenderingContext,
                serviceWorker: 'serviceWorker' in navigator
            };

            let supported = 0;
            let total = Object.keys(features).length;
            
            for (const [feature, isSupported] of Object.entries(features)) {
                if (isSupported) {
                    supported++;
                    addTestResult(`Ø¯Ø¹Ù… ${feature}`, 'Ù…Ø¯Ø¹ÙˆÙ…', 'pass');
                } else {
                    addTestResult(`Ø¯Ø¹Ù… ${feature}`, 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…', 'warning');
                }
            }

            const percentage = Math.round((supported / total) * 100);
            if (percentage >= 90) {
                addTestResult('Ø¯Ø¹Ù… Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø¹Ø§Ù…', `${percentage}% - Ù…Ù…ØªØ§Ø²`, 'pass');
            } else if (percentage >= 70) {
                addTestResult('Ø¯Ø¹Ù… Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø¹Ø§Ù…', `${percentage}% - Ø¬ÙŠØ¯`, 'warning');
            } else {
                addTestResult('Ø¯Ø¹Ù… Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø¹Ø§Ù…', `${percentage}% - Ø¶Ø¹ÙŠÙ`, 'fail');
            }
        }

        function testNetworkConnectivity() {
            const isOnline = navigator.onLine;
            
            if (isOnline) {
                addTestResult('Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„', 'Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª', 'pass');
                
                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù€ JSONBin
                fetch('https://api.jsonbin.io/v3/', { method: 'GET' })
                    .then(response => {
                        if (response.ok) {
                            addTestResult('Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù€ JSONBin', 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'pass');
                        } else {
                            addTestResult('Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù€ JSONBin', `Ø®Ø·Ø£ HTTP: ${response.status}`, 'fail');
                        }
                    })
                    .catch(error => {
                        addTestResult('Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù€ JSONBin', `Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`, 'fail');
                    });
            } else {
                addTestResult('Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„', 'ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª', 'warning');
            }
        }

        function testDOMElements() {
            const requiredElements = [
                'authSection',
                'studentLoginSection', 
                'dashboardSection',
                'signInBtn',
                'signOutBtn',
                'themeToggle',
                'toaster',
                'modalOverlay'
            ];

            let foundElements = 0;
            
            requiredElements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element) {
                    foundElements++;
                    addTestResult(`Ø¹Ù†ØµØ± ${elementId}`, 'Ù…ÙˆØ¬ÙˆØ¯', 'pass');
                } else {
                    addTestResult(`Ø¹Ù†ØµØ± ${elementId}`, 'Ù…ÙÙ‚ÙˆØ¯', 'fail');
                }
            });

            const percentage = Math.round((foundElements / requiredElements.length) * 100);
            addTestResult('Ø¹Ù†Ø§ØµØ± DOM', `${foundElements}/${requiredElements.length} (${percentage}%)`, 
                percentage === 100 ? 'pass' : 'warning');
        }

        function testLocalStorage() {
            try {
                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
                localStorage.setItem('test_key', 'test_value');
                
                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
                const value = localStorage.getItem('test_key');
                if (value === 'test_value') {
                    addTestResult('localStorage - Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©/Ø§Ù„ÙƒØªØ§Ø¨Ø©', 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'pass');
                } else {
                    addTestResult('localStorage - Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©/Ø§Ù„ÙƒØªØ§Ø¨Ø©', 'Ù‚ÙŠÙ…Ø© Ø®Ø§Ø·Ø¦Ø©', 'fail');
                }
                
                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ø°Ù
                localStorage.removeItem('test_key');
                if (!localStorage.getItem('test_key')) {
                    addTestResult('localStorage - Ø§Ù„Ø­Ø°Ù', 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'pass');
                } else {
                    addTestResult('localStorage - Ø§Ù„Ø­Ø°Ù', 'ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­Ø°Ù', 'fail');
                }
                
                // Ø§Ø®ØªØ¨Ø§Ø± JSON
                const testObj = { test: 'value', number: 123 };
                localStorage.setItem('test_json', JSON.stringify(testObj));
                const parsedObj = JSON.parse(localStorage.getItem('test_json'));
                
                if (parsedObj.test === 'value' && parsedObj.number === 123) {
                    addTestResult('localStorage - JSON', 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'pass');
                } else {
                    addTestResult('localStorage - JSON', 'Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ JSON', 'fail');
                }
                
                localStorage.removeItem('test_json');
                
            } catch (error) {
                addTestResult('localStorage', `Ø®Ø·Ø£: ${error.message}`, 'fail');
            }
        }

        function testFontLoading() {
            // ÙØ­Øµ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
            const testElement = document.createElement('div');
            testElement.style.fontFamily = 'Noto Sans Arabic, Arial';
            testElement.style.position = 'absolute';
            testElement.style.visibility = 'hidden';
            testElement.textContent = 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø®Ø· Ø§Ù„Ø¹Ø±Ø¨ÙŠ';
            document.body.appendChild(testElement);
            
            const computedStyle = window.getComputedStyle(testElement);
            const fontFamily = computedStyle.fontFamily;
            
            if (fontFamily.includes('Noto Sans Arabic')) {
                addTestResult('Ø®Ø· Noto Sans Arabic', 'Ù…Ø­Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­', 'pass');
            } else {
                addTestResult('Ø®Ø· Noto Sans Arabic', 'ØºÙŠØ± Ù…Ø­Ù…Ù„ - Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø· Ø¨Ø¯ÙŠÙ„', 'warning');
            }
            
            document.body.removeChild(testElement);
        }

        function testResponsiveDesign() {
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            
            addTestResult('Ø­Ø¬Ù… Ø§Ù„Ø¹Ø±Ø¶', `${viewportWidth}x${viewportHeight}`, 'info');
            
            if (viewportWidth < 768) {
                addTestResult('Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²', 'Ù‡Ø§ØªÙ Ù…Ø­Ù…ÙˆÙ„', 'info');
            } else if (viewportWidth < 1024) {
                addTestResult('Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²', 'Ø¬Ù‡Ø§Ø² Ù„ÙˆØ­ÙŠ', 'info');
            } else {
                addTestResult('Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²', 'Ø³Ø·Ø­ Ù…ÙƒØªØ¨', 'info');
            }

            // ÙØ­Øµ Ø¯Ø¹Ù… Media Queries
            if (window.matchMedia) {
                addTestResult('Media Queries', 'Ù…Ø¯Ø¹ÙˆÙ…', 'pass');
            } else {
                addTestResult('Media Queries', 'ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…', 'warning');
            }
        }

        function testPerformance() {
            const start = performance.now();
            
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ù…Ø¹Ù‚Ø¯Ø©
            for (let i = 0; i < 100000; i++) {
                Math.random();
            }
            
            const end = performance.now();
            const executionTime = end - start;
            
            if (executionTime < 10) {
                addTestResult('Ø§Ù„Ø£Ø¯Ø§Ø¡', `${executionTime.toFixed(2)}ms - Ù…Ù…ØªØ§Ø²`, 'pass');
            } else if (executionTime < 50) {
                addTestResult('Ø§Ù„Ø£Ø¯Ø§Ø¡', `${executionTime.toFixed(2)}ms - Ø¬ÙŠØ¯`, 'warning');
            } else {
                addTestResult('Ø§Ù„Ø£Ø¯Ø§Ø¡', `${executionTime.toFixed(2)}ms - Ø¨Ø·ÙŠØ¡`, 'fail');
            }
        }

        function testSecurity() {
            // ÙØ­Øµ HTTPS
            if (location.protocol === 'https:') {
                addTestResult('Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ HTTPS', 'Ø¢Ù…Ù†', 'pass');
            } else {
                addTestResult('Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ HTTPS', 'ØºÙŠØ± Ø¢Ù…Ù† - ÙŠÙÙ†ØµØ­ Ø¨Ù€ HTTPS', 'warning');
            }

            // ÙØ­Øµ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø®ØªÙ„Ø·
            if (location.protocol === 'https:' && document.querySelectorAll('img[src^="http:"], script[src^="http:"], link[href^="http:"]').length > 0) {
                addTestResult('Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø®ØªÙ„Ø·', 'Ù…ÙˆØ¬ÙˆØ¯ - Ù…Ø´ÙƒÙ„Ø© Ø£Ù…Ù†ÙŠØ©', 'fail');
            } else {
                addTestResult('Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø®ØªÙ„Ø·', 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'pass');
            }
        }

        function testAccessibility() {
            // ÙØ­Øµ ÙˆØ¬ÙˆØ¯ alt text Ù„Ù„ØµÙˆØ±
            const images = document.querySelectorAll('img');
            let imagesWithAlt = 0;
            
            images.forEach(img => {
                if (img.alt && img.alt.trim().length > 0) {
                    imagesWithAlt++;
                }
            });
            
            if (images.length === 0) {
                addTestResult('Ù†Øµ Ø¨Ø¯ÙŠÙ„ Ù„Ù„ØµÙˆØ±', 'Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ±', 'info');
            } else if (imagesWithAlt === images.length) {
                addTestResult('Ù†Øµ Ø¨Ø¯ÙŠÙ„ Ù„Ù„ØµÙˆØ±', `Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙˆØ± Ù„Ø¯ÙŠÙ‡Ø§ Ù†Øµ Ø¨Ø¯ÙŠÙ„ (${imagesWithAlt}/${images.length})`, 'pass');
            } else {
                addTestResult('Ù†Øµ Ø¨Ø¯ÙŠÙ„ Ù„Ù„ØµÙˆØ±', `${imagesWithAlt}/${images.length} ØµÙˆØ± Ù„Ø¯ÙŠÙ‡Ø§ Ù†Øµ Ø¨Ø¯ÙŠÙ„`, 'warning');
            }

            // ÙØ­Øµ Ø§Ø³ØªØ®Ø¯Ø§Ù… ARIA
            const ariaElements = document.querySelectorAll('[aria-label], [aria-describedby], [role]');
            addTestResult('Ø§Ø³ØªØ®Ø¯Ø§Ù… ARIA', `${ariaElements.length} Ø¹Ù†ØµØ± ÙŠØ³ØªØ®Ø¯Ù… ARIA`, ariaElements.length > 0 ? 'pass' : 'warning');
        }

        async function runAllTests() {
            clearResults();
            
            addTestResult('Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª', 'Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø©...', 'info');
            
            // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¨ØªØ³Ù„Ø³Ù„
            await new Promise(resolve => setTimeout(resolve, 100));
            testBrowserSupport();
            
            await new Promise(resolve => setTimeout(resolve, 100));
            testNetworkConnectivity();
            
            await new Promise(resolve => setTimeout(resolve, 100));
            testDOMElements();
            
            await new Promise(resolve => setTimeout(resolve, 100));
            testLocalStorage();
            
            await new Promise(resolve => setTimeout(resolve, 100));
            testFontLoading();
            
            await new Promise(resolve => setTimeout(resolve, 100));
            testResponsiveDesign();
            
            await new Promise(resolve => setTimeout(resolve, 100));
            testPerformance();
            
            await new Promise(resolve => setTimeout(resolve, 100));
            testSecurity();
            
            await new Promise(resolve => setTimeout(resolve, 100));
            testAccessibility();
            
            // ØªÙ‚Ø±ÙŠØ± Ù†Ù‡Ø§Ø¦ÙŠ
            const total = stats.pass + stats.fail + stats.warning + stats.info;
            const successRate = Math.round(((stats.pass) / (stats.pass + stats.fail)) * 100);
            
            addTestResult('Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ', 
                `ØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ ${total} Ø§Ø®ØªØ¨Ø§Ø± - Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­: ${successRate}%`, 
                successRate >= 90 ? 'pass' : successRate >= 70 ? 'warning' : 'fail',
                `Ù†Ø¬Ø­: ${stats.pass}, ÙØ´Ù„: ${stats.fail}, ØªØ­Ø°ÙŠØ±: ${stats.warning}, Ù…Ø¹Ù„ÙˆÙ…Ø©: ${stats.info}`
            );
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø£ÙˆÙ„ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.addEventListener('load', () => {
            setTimeout(() => {
                addTestResult('ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©', 'ØªÙ… ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­', 'pass');
                testBrowserSupport();
            }, 500);
        });
    </script>
</body>
</html>